flexbe_cli.block.register("ACADEMY_FEED",{lastItem:0,loading:!1,list:[],onScreen:function(t){t&&this.initFit()},initFit:function(){var i=this;this.fitInited=!0,this.$loader=this.$area.find(".updates-loader");var e=-1,s=flexbe_cli.resize.height,l=!1;requestAnimationFrame(function t(){if(requestAnimationFrame(t),i.tween&&i.tween.onscreen&&(!i.fitInited||e!==flexbe_cli.scroll.latest)){e=flexbe_cli.scroll.latest,s=flexbe_cli.resize.height,l=i.loaderState;var a=(i.$loader.offset()||{}).top;i.loaderState=a<=e+s,l!==i.loaderState&&i.loaderState&&i.loadFit()}})},loadFit:function(i){var s=this;if(void 0===i&&(i=function(){}),!this.loading){this.loading=!0;var l=[];$.ajax({url:"/admin/updates/get_updates",type:"POST",dataType:"json",data:{limit:5,last_id:this.lastItem}}).done(function(t){if(t.is_success&&t.data){var a="",e=-1;t.data.forEach(function(a){var t=s.list.findIndex(function(t){return t.id==a.id});if(0<=t)e=t,s.list.splice(t,1,a);else{var i=-1===e?s.list.length:e;s.list.splice(i,0,a),l.splice(i,0,a)}}),l.forEach(function(t){a+='<div class="card-item"><div class="date-wrap"><span data-info="data" class="date">',a+=t.date,a+='</span></div><div class="line-wrap"><span class="line line-top"></span><span class="dot"></span><span class="line line-bottom"></span></div><div class="card-wrapper"><div class="img-card">',a+='<img  data-info="img"  src="'+t.image+'" srcset="'+t.image_retina+' 2x">',a+='</div><div class="info"><span  data-info="data"  class="mobile-date">'+t.date+"</span>",a+='<div  data-info="title"  class="title">'+t.title+"</div>",a+='<div  data-info="text"  class="text">'+t.text+"</div>",t.buttons.length&&(a+='<div class="wrap-button">',t.buttons.forEach(function(t){a+='<a href="'+t.url+'"',a+=t.new_window?' target="_blank"':"",a+=' class="gubert-button blue fill select size-l">'+t.title+"</a>"}),a+="</div>"),a+="</div></div></div>"}),s.list.length&&s.$area.find(".updates-loader-wrap").removeClass("zero"),l.length&&s.$area.find(".cards-container").append(a),l.length<5&&(s.$area.find(".updates-loader-wrap").removeClass("active"),s.$area.find(".card-item:last-of-type .line.line-bottom").css("width","0")),s.loading=!1,s.lastItem=s.list[s.list.length-1].id}else i(new Error(t.message))}).fail(function(t){i(new Error(t)),s.loading=!1})}}});
flexbe_cli.block.register("CARD",{onUpdate:function(t){var a=this;void 0===t&&(t={}),setTimeout(function(){var e=flexbe_cli.components.instances[a.id].find(function(e){return"cards"===e.is}),i=e&&e.swiper;if(!i)return!1;if(t.templateRendered&&t&&"items_add"===t.reason){var r=i.realIndex,s=t.reasonData.to,n=r;r+i.params.slidesPerView<=s&&(n=s-i.params.slidesPerView+1),n!==r&&i.slideTo(n)}t.styleRendered&&i.update(!1)},100)}});
flexbe_cli.block.register("GALLERY",{onUpdate:function(t){var a=this;void 0===t&&(t={}),setTimeout(function(){var e=flexbe_cli.components.instances[a.id].find(function(e){return"cards"===e.is}),i=e&&e.swiper;if(!i)return!1;if(t.templateRendered&&t&&"items_add"===t.reason){var r=i.realIndex,s=t.reasonData.to,n=r;r+i.params.slidesPerView<=s&&(n=s-i.params.slidesPerView+1),n!==r&&i.slideTo(n)}t.styleRendered&&i.update(!1)},100)}});
flexbe_cli.block.register("LOGO",{onUpdate:function(t){var a=this;void 0===t&&(t={}),setTimeout(function(){var e=flexbe_cli.components.instances[a.id].find(function(e){return"cards"===e.is}),i=e&&e.swiper;if(!i)return!1;if(t.templateRendered&&t&&"items_add"===t.reason){var r=i.realIndex,s=t.reasonData.to,n=r;r+i.params.slidesPerView<=s&&(n=s-i.params.slidesPerView+1),n!==r&&i.slideTo(n)}t.styleRendered&&i.update(!1)},100)}});
flexbe_cli.element.register("map01",{onScreen:function(e){var i=this;setInterval(this.resizeTmt),flexbe_cli.is_admin&&e&&(this.resizeTmt=setInterval(function(){var e=i.$area.outerHeight();i.oldHH!==e&&(i.oldHH&&i._onResize({is:i.is,id:i.id,reason:"client_resize"}),i.oldHH=e)},200))}});
flexbe_cli.element.register("media02",{onLoad:function(){this.$container=this.$area.find(".state-container"),this.$before=this.$container.find(".state-before"),this.$after=this.$container.find(".state-after"),this.$beforeImage=this.$before.find(".component-image"),this.$afterImage=this.$after.find(".component-image"),this.$handle=this.$container.find(".drag-handle"),this.direction=this.$container.attr("data-direction"),this.initial=this.$container.attr("data-initial")||50,this.clientInited||(this.clientInited=!0,this.position=this.initial,this.$container.addClass("inited")),this.bindEvents(),this.setSize(),this.setClip(this.initial)},onResize:function(){this.setSize(),this.setClip(this.position)},bindEvents:function(){var n,s,o,a,r=this,h=this.direction,d=this.$container,c=d[0],f=!1,l=!1;function t(t){if(!flexbe_cli.scroll.inScroll&&(!flexbe_cli.is_admin||t.target.closest(".drag-handle"))){var e=d.closest(".swiper-inited")[0];e&&e.swiper&&!a&&(o=e.swiper,a=!0,o.detachEvents()),f=!0,s=c.getBoundingClientRect();var i=t.touches&&t.touches[0]||t;n=p(i,s),d.addClass("drag"),flexbe_cli.is_admin||r.setClip(n),document.body.addEventListener("mousemove",u),document.body.addEventListener("touchmove",u,{passive:!1},!1),window.addEventListener("mouseup",v),window.addEventListener("touchend",v,{passive:!1},!1),"y"===h&&m(t)}}function u(t){if(f){var e=p(t.touches&&t.touches[0]||t,s),i=Math.abs(n-e);if(!l){if(i<.8)return;l=!0,d.addClass("resize")}r.setClip(e),"y"===h&&m(t)}}function v(){l=f=!1,d.removeClass("drag resize"),document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u),document.removeEventListener("mouseup",v),document.removeEventListener("touchend",v),o&&a&&(a=!1,o.attachEvents())}function m(t){t.preventDefault(),t.stopPropagation()}function p(t,e){return 100*("y"===h?(t.clientY-e.top)/e.height:(t.clientX-e.left)/e.width)}this.$area[0].addEventListener("pointerdown",function(t){t.stopPropagation()},!1),c.addEventListener("mousedown",t,{passive:!1},!1),c.addEventListener("touchstart",t,{passive:!1},!1)},setSize:function(){var t=this.direction,e=this.$container["y"===t?"innerHeight":"innerWidth"]();return e=Math.round(e),this.containerSize=e},setClip:function(t){if(void 0!==t){var e=this.direction,i=this.$before,n=this.$beforeImage,s=this.$after,o=this.$afterImage,a=this.$handle,r="y"===e?"height":"width",h="y"===e?"top":"left";this.position=Math.max(0,Math.min(100,t)),n.css(r,this.containerSize+"px"),o.css(r,this.containerSize+"px"),i.css(r,this.position+"%"),s.css(r,100-this.position+"%"),a.css(h,this.position+"%")}}});
flexbe_cli.element.register("spoiler01",{onReady:function(){this.$list=this.$area.find(".spoiler-list"),this.$lastItem=null,this.isSpoilered=+this.$list.attr("data-spoiler"),this.bindEvents()},bindEvents:function(){var e=this;if(!this.isSpoilered)return!1;var i,t=".clickable";this.$list.on("mousedown",t,function(t){i=(!flexbe_cli.is_admin||!$(t.target).closest(".element-text, .component-image, .editor-overlay").length)&&(!$(t.target).closest(".not-clickable").length&&{target:t.currentTarget,x:t.screenX,y:t.screenY})}),this.$list.on("mouseup",t,function(t){!i||i.target!==t.currentTarget||flexbe_cli.is_admin&&$(t.target).closest(".element-text").length||(Math.sqrt(Math.pow(i.x-t.screenX,2)+Math.pow(i.y-t.screenY,2))<5&&e.toggleSpoiler($(t.currentTarget)),i=!1)})},toggleSpoiler:function(t,e){var i=0;e||(e="true"!==t.attr("data-expanded"));var n=t.find(".collapsed");if(!n[0].inAnimation){n[0].inAnimation=!0;var s=t.find(".spoiler-text"),a=s.find(".spoiler-text-content"),l=n[0].scrollHeight,o=Math.max(250,Math.min(400,3*l));if(e)(i=(s.height()-a.innerHeight())/2)<10&&a.css("margin",i+"px 0");n.off("transitionend").one("transitionend",function(){n.css("height","").toggleClass("collapsed--auto",e),n[0].inAnimation=!1}),n.css({height:l+"px",transitionDuration:o+"ms"}),e?n.addClass("collapsed--show"):(n[0].offsetHeight,n.removeClass("collapsed--show").css("height","0")),t.attr("data-expanded",e),this.$lastItem=t}}});
flexbe_cli.element.register("timer01",{sizes:{xs:33,s:40,m:55,l:80,xl:1/0},onReady:function(){this.setTimerSize()},onResize:function(){this.setTimerSize()},onScreen:function(e){e&&!this.isViewed&&(this.isViewed=!0,this.setTimerSize())},setTimerSize:function(){var t=this,e=this.$area.find(".component-timer"),n=e.outerWidth()/(e.find(".number").length+e.find(".colon").length),i=Object.keys(this.sizes).find(function(e){var i=t.sizes[e];return n<i});e.attr("data-size",i)}});
flexbe_cli.modal.register("PAY",{types:{},pay_id:"",hash:"",selectors:{},onLoad:function(){var e=this;this.start(),flexbe_cli.events.on("pay",function(t,a){a&&"init"===a.action&&e.start()})},start:function(){this.loadSelectors();var t=this.getPayStatus();if(t){switch(t){case"success":this.showSuccessAlert();break;case"fail":this.showFailAlert();break;case"pay":this.getBill()}setTimeout(function(){flexbe_cli.modal.open("pay")},300)}},loadSelectors:function(){this.selectors.$container=this.$modal.find(".modal-content"),this.selectors.$bill=this.$modal.find(".action-bill"),this.selectors.$cash=this.$modal.find(".action-cash"),this.selectors.$already=this.$modal.find(".action-already"),this.selectors.$success=this.$modal.find(".action-success"),this.selectors.$fail=this.$modal.find(".action-fail")},getPayStatus:function(){var t=!1;try{t=JSON.parse('{"'+decodeURI(location.search.substring(1)).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}catch(t){}if(!t.pay_id)return!1;if(this.pay_id=t.pay_id,this.hash=t.h,t.pay_status){try{history.pushState(null,null,window.location.pathname)}catch(t){}return t.pay_status}return"pay"},getBillData:function(a){this.pay_id&&!1!==this.pay_id&&$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"payData",pay_id:this.pay_id,hash:this.hash}}).done(function(t){"function"==typeof a&&a(t)})},getBill:function(){var a=this;this.pay_id&&!1!==this.pay_id&&this.getBillData(function(t){if(0===t.status)return!1;a.types=t.pay.support_types,2==+t.pay.pay_status?a.showAlreadyPayed(t.pay):a.cashonly()?a.showCashInstruction(t.pay):a.showBillForm(t.pay)})},showBillForm:function(t){var s=this;this.selectors.$container.attr("data-type","bill");var i=this.selectors.$bill.find(".pay-methods-list-inner").empty(),a=this.selectors.$container.find(".pay-action"),e=this.selectors.$bill.find(".component-button"),n={cash:"cash",visa:"visa",mastercard:"mastercard",yandex:"yandex",qiwi:"qiwi",webmoney:"webmoney",webmoney_z:"webmoney",webmoney_u:"webmoney",mobile_megafon:"megafon",mobile_beeline:"bee",mobile_mts:"mts",mobile_tele2:"t2",sberbank:"sberbank",bank:"bank",w1:"w1",ibank_robo:"ibank_robo",yandex_kassa:"yandexkassa",yandexkassa:"yandexkassa",bank_company:"bank_company"};for(var o in this.types)if(this.types[o].name){var c=this.types[o],l=n[o],r='<label class="item" data-type="'+o+'" title="'+c.name+'" for="'+o+'">\n                    <input type="radio" name="form[pay_method]" value="'+o+'" id="'+o+'">\n                    <div class="item-inner">\n                            <span class="check"></span>\n\n                            <span class="icon">\n                                <img class="icon-inner" src="/_s/images/land/theme/4/res/pay/'+l+'.svg" alt="'+c.name+'" />\n                            </span>\n\n                            <span class="item-name font-size-tiny">'+c.name+"</span>\n                    </div>\n                </label>";i.append(r)}a.find(".title > span.num").text(t.pay_id),a.find(".price > span").text(t.pay_sum),i.on("click",".item",function(t){return t.preventDefault(),$(t.currentTarget).find("input").prop("checked",!0),e.removeClass("disabled"),!1}),e.on("click",function(t){var a=i.find("input:checked").val();if(!a)return i.removeClass("shake"),setTimeout(function(){i.addClass("shake")},30),!1;if("cash"===a)return s.showCashInstruction(),!1;var e="/mod/pay/?pay_type="+a+"&pay_id="+s.pay_id+"&h="+s.hash;$(t.currentTarget).attr("href",e),flexbe_cli.run.is_mobile&&flexbe_cli.run.is_OSX||$(t.currentTarget).addClass("submitting")})},showCashInstruction:function(){this.selectors.$container.attr("data-type","cash"),this.types.cash&&this.types.cash.instruction&&this.selectors.$cash.find(".text").html(this.types.cash.instruction),$.ajax({url:"/mod/pay/ajax",type:"GET",dataType:"json",data:{act:"selectCash",pay_id:this.pay_id,hash:this.hash}})},showAlreadyPayed:function(t){this.selectors.$container.attr("data-type","already");var a=this.selectors.$container.find(".pay-action"),e="";"0"!=t.pay_time_done&&(e=t.pay_time_done),this.selectors.$already.find(".text > span.num").text(t.pay_id),a.find(".title > span.num").text(t.pay_id),a.find(".sub > span").text(e),a.find(".price > span").text(t.pay_sum)},showSuccessAlert:function(){this.selectors.$container.attr("data-type","success"),flexbe_cli.stat.reach_goal("pay_done")},showFailAlert:function(){var e=this;this.selectors.$container.attr("data-type","fail"),this.getBillData(function(t){var a=e.selectors.$container.find(".pay-action");a.find(".title > span.num").text(t.pay.pay_id),a.find(".price > span").text(t.pay.pay_sum),e.selectors.$fail.find(".component-button").off("click").on("click",function(){e.getBill()})})},cashonly:function(){return this.types.cash&&1===Object.keys(this.types).length}});
function _extends(){return(_extends=Object.assign||function(t){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t}).apply(this,arguments)}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}flexbe_cli.widget.register("ANCHORS",{require:["/_s/lib/anime/anime.min.js"],$list:null,onLoad:function(){var e=this;this.$list=this.$widget.find(".anchors-list"),this.list="object"==_typeof(this.$list.data("anchors"))&&this.$list.data("anchors").list||[];var t=_extends({style:1,show_title:0},this.$list.data("anchors"));this.style=t.style,this.show_title=t.show_title,this.$list.removeAttr("data-anchors"),flexbe_cli.run.is_mobile||(this.drawList(),this.setActive(),flexbe_cli.is_admin&&flexbe_cli.events.off("layout_change.anchors").on("layout_change.anchors",function(t,i){"block"===i.is&&e.drawList()}))},check:function(){var i=$(".b_block").not('[data-b-type*="overflow"]');this.list=this.list.filter(function(t){return!(!t.enabled||!i.closest('[data-id="'+t.id+'"]')[0])})},drawList:function(){var e=this;if(0===flexbe_cli.block.$blocks.length)return this.$list.hide(),!1;this.$list.show(),this.check();var s="";flexbe_cli.is_admin&&this.list.length<1?s='<svg style="color: #adadad" width="18" height="98" viewBox="0 0 18 98" xmlns="http://www.w3.org/2000/svg">\n                <g fill="none" fill-rule="evenodd">\n                    <circle opacity=".05" cx="9" cy="5" r="5"/>\n                    <circle opacity=".2" cx="9" cy="25" r="5"/>\n                    <circle opacity=".2" cx="9" cy="73" r="5"/>\n                    <circle opacity=".05" cx="9" cy="93" r="5"/>\n                    <path d="M9 40a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm5.126 9.626h-4.5v4.5H8.34v-4.5h-4.5V48.34h4.5v-4.5h1.286v4.5h4.5v1.286z" opacity=".45"/>\n                </g>\n            </svg>':1<=this.list.length&&(this.list.forEach(function(t){var i=e.show_title&&t.title?' data-title="'+t.title+'"':"";s+="<li"+i+'><a href="#'+t.id+'"></a></li>'}),s+='<li class="helper"><a></a></li>'),this.$list.find("ul").html(s),this.$helper=this.$list.find(".helper"),this.animateList()},animateList:function(){var t=this;if(!(this.list.length<1)){if(flexbe_cli.is_admin)this.$helper.css({opacity:1,transform:"translateY("+24*this.index+"px)"});else{var i=anime({targets:this.$list.find("li").not(this.$helper).get(),duration:200,opacity:[0,1],scale:[.4,1],easing:"easeOutBack",autoplay:!1,delay:function(t,i){return 200*i},complete:function(){anime({targets:t.$helper.get(),duration:400,translateY:24*t.index,scale:[2.5,1],opacity:[0,1],easing:"easeInExpo"})}});this.$list.addClass("hide"),setTimeout(function(){t.$list.removeClass("hide"),i.play()},1500)}this.$list.find("li").removeClass("active").eq(this.index).addClass("active")}},index:0,setActive:function(){var n=this;if(!(this.list.length<1)){var s=function(e){n.$list.css("color",e.tween.color);var s=n.index;n.list.some(function(t,i){return+t.id==+e.id&&(s=i,!0)}),(s=Math.max(0,Math.min(n.list.length-1,s)))!==n.index&&(!function(t){if(n.$list.find("li").removeClass("active"),n.$list.find("li").eq(t).addClass("active"),1==+n.style){var i=24*t,e=0<t-n.index?12:-12;anime.remove(n.$helper[0]),anime({targets:n.$helper[0],translateY:i-e,scaleY:2.5,scaleX:.6,duration:100,easing:"easeInQuad",complete:function(){anime({targets:n.$helper[0],translateY:i,scaleY:1,scaleX:1,duration:100,easing:"easeOutQuad"})}})}}(s),n.index=s)};flexbe_cli.block.$list.find(".b_block").each(function(t,i){var e=i._core;e&&e.isFocused&&s(e)}),flexbe_cli.events.off("entity_event.anchors").on("entity_event.anchors",function(t,i){i&&i.type&&"focus"===i.type&&i.state&&i.core&&"block"===i.core.is&&s(i.core)}),this.$list.on("click","li",function(t){if(!$(t.target).is("a"))return $(t.currentTarget).find("[href]").trigger("click"),t.preventDefault(),!1})}}});
!function(){var i,e;flexbe_cli.widget.register("CART",{list:[],$list:null,$sum:null,$button:null,is_open:!1,onInit:function(){this.$container=this.$widget.find(".widget-data"),this.$list=this.$widget.find(".order-list > ul"),this.$sum=this.$widget.find(".checkout .price"),this.$button=this.$widget.find(".cart-button"),flexbe_cli.is_admin?this.list=[{id:"7832324_1",count:1,img:"/img/1000000945_200.jpg",title:"Тестовый товар 1",price:750},{id:"7832464_2",count:2,img:"/img/1000000948_200.jpg",title:"Тестовый товар 2",price:2550}]:this.loadFromStorage(),this.events(),this.popstate(),this.renderList()},onLoad:function(){this.formInit()},onUpdate:function(){this.onInit(),this.is_open&&(this.$container.addClass("fade-in noanimate"),this.open())},formInit:function(){var i=this;flexbe_cli.components.instances[this.id].forEach(function(t){"form"===t.is&&((i.form=t).onBeforeSend(function(){if(!i.list.length)return!1;t&&t.addItems(i.list)}),t.onAfterSent(function(){i.close(),flexbe_cli.stat.ecommerce.purchase(i.list),i.list=[],i.renderList()}))})},events:function(){var n=this;flexbe_cli.events.off("cart_command.cart-widget").on("cart_command.cart-widget",function(t,i){if(i)switch(i.command){case"toggle":n.is_open?n.close():n.open();break;case"open":n.open(i);break;case"close":n.close(i);break;case"add":n.add(i.item);break;case"remove":n.remove(i.id)}}),this.$list.off("click").on("click","[data-action]",function(t){var i=$(t.currentTarget).closest("li"),e=$(t.currentTarget).data("action"),s=i.data("id");s&&("remove"===e?n.remove(s):n.updateCount(s,e))}),this.$list.off("input").on("input",".count",function(t){var i=$(t.currentTarget).closest("li").attr("data-id"),e=+t.target.value;e||(e=1,$(t.currentTarget).val(1)),n.updateCount(i,e)}),this.$widget.off("click.cart-button").on("click.cart-button",".cart-button",function(){n.is_open?n.close():n.open()}),this.$container.off("click.close").on("click.close",'a.close, [data-overlay="true"]',function(t){t.target===t.currentTarget&&n.close()}),$(document).off("keyup.cart_esc_close").on("keyup.cart_esc_close",function(t){27===t.which&&n.close()}),$(window).on("popstate",function(){n.popstate()})},open:function(){var t=this;this.is_open=!0,this._onScreen({state:!0}),this._onView({state:!0}),this.renderList(),flexbe_cli.block.pushOverlay("cart",!0),this.oldHash=!1,flexbe_cli.is_admin?this.$container.addClass("is-editor"):(this.$button.addClass("hide"),this.loadFromStorage(),"#customer_cart"!==location.hash&&"##customer_cart"!==location.hash&&(/^#{1,2}/.test(location.hash)&&(this.oldHash=location.hash),location.hash="customer_cart")),$("body").addClass("overflow"),this.$area.addClass("show"),this.$container.hasClass("noanimate")?this.$container.addClass("show fade-in"):(this.$container.addClass("show"),this.$container.outerHeight(),this.$container.addClass("fade-in")),this.$container.removeClass("noanimate"),flexbe_cli.run.is_screen_all_mobile?(clearTimeout(e),i=flexbe_cli.scroll.latest,e=setTimeout(function(){$("body").addClass("is-widget-open is-cart-open"),$("body, html").scrollTop(0),flexbe_cli.run.is_ios&&(t.$container.css("display","none"),t.$container.outerHeight(),t.$container.css("display",""))},350)):$("body").addClass("is-widget-open is-cart-open")},close:function(){var t=this;$(window).off("keyup.cart_esc_close"),flexbe_cli.block.removeOverlay("cart"),this.is_open&&(this.is_open=!1,$("body").removeClass("overflow"),this.$area.removeClass("show"),this.$button.removeClass("hide"),this.$container.removeClass("fade-in"),this.$container.addClass("fade-out"),/customer_cart/.test(location.hash)&&(this.oldHash?location.hash=this.oldHash:(flexbe_cli.lockPopstate=!0,location.hash="##",flexbe_cli.lockPopstate=!1)),setTimeout(function(){t.$container.removeClass("fade-out show noanimate")},350),flexbe_cli.run.is_screen_all_mobile?(clearTimeout(e),$("body").removeClass("is-widget-open is-cart-open"),$("body, html").scrollTop(i)):$("body").removeClass("is-widget-open is-cart-open"))},popstate:function(){var t=this;if(flexbe_cli.is_admin||flexbe_cli.lockPopstate)return!1;setTimeout(function(){/customer_cart/.test(location.hash)?t.open():t.close()},30)},add:function(i,t){if(void 0===t&&(t=!1),(!this.is_open||t)&&i){i.count=parseInt(i.count,10)||1,i.price=parseFloat(i.price)||0;var e=!1;this.list&&this.list.length&&(this.list=this.list.map(function(t){return t.id===i.id&&(t.count+=i.count,e=!0),t})),e||this.list.push(i),flexbe_cli.stat.ecommerce.add(i.id,i.title,i.count,i.price),flexbe_cli.stat.reach_goal("add_to_cart",i),this.renderList();var s=$(".cart-button");s.removeClass("blink"),setTimeout(function(){s.addClass("blink"),setTimeout(function(){s.removeClass("blink")},300)},30)}},remove:function(i){if(void 0===i&&(i=!1),!1!==i){var t=this.list.filter(function(t){return t.id==i})[0];flexbe_cli.stat.ecommerce.remove(t.id,t.title),this.list=this.list.filter(function(t){return t.id!=i}),this.renderList()}},updateCount:function(e,s){var n=this;void 0===e&&(e=!1),void 0===s&&(s="+"),!1!==e&&(this.list&&this.list.length&&(this.list=this.list.map(function(t){if(t.id==e){"+"===s?t.count+=1:"-"===s&&1<t.count?t.count-=1:(s=parseInt(s,10),t.count=s||1),t.count=parseInt(t.count,10)||1;var i=n.$list.find('[data-id="'+e+'"]');i.find(".price").text(n.formatPrice(t.count*t.price)),"-"!==s&&"+"!==s||i.find(".count").val(t.count),flexbe_cli.stat.ecommerce.add(t.id,t.title,t.count,t.price)}return t})),this.saveToStorage(),this.renderCount())},renderList:function(){var e=this;this.saveToStorage(),this.renderCount();var s="";this.list.length?(this.list.forEach(function(t){var i;s+='\n                <li data-id="'+(i=t).id+'">\n                    <div class="img-holder">\n                        <div class="img" '+(i.img?'style="background-image: url('+i.img+')"':"")+'></div>\n                    </div>\n\n                    <div class="content-holder">\n                        <div class="flex-line item-title-outer">\n\n                        <div class="item-title">'+(i.title||"-")+'</div>\n                            <a class="close-times" data-action="remove"></a>\n                        </div>\n\n                        <div class="flex-line item-count-outer">\n                            <div class="item-count">\n                                <a data-action="-"></a>\n                                <input type="number" class="count" min="1" value="'+i.count+'"/>\n                                <a data-action="+"></a>\n                            </div>\n\n                            <div class="item-price text-style-strong">\n                                <span class="price">'+e.formatPrice(i.price*i.count)+'</span>\n                                <span class="curr">'+flexbe_cli.lang.currency+"</span>\n                            </div>\n                        </div>\n                    </div>\n                </li>"}),this.$container.removeClass("cart-is-empty")):this.$container.addClass("cart-is-empty"),this.$list.html(s),this.form&&this.form.addItems(this.list),flexbe_cli.events.emit("cart_event",{event:"updateList",sender:"core",list:this.list})},renderCount:function(){var i=0,e=0;this.list.length&&this.list.forEach(function(t){t.count&&(i+=parseInt(t.count,10),t.price&&(e+=parseInt(t.count,10)*parseFloat(t.price)))}),this.count=i,this.sum=e,this.$sum.text(this.formatPrice(e)),this.$container.find(".product-count .count").text(i),$(".cart-button").attr("data-count",i),flexbe_cli.events.emit("cart_event",{event:"updateCount",sender:"core",count:i,sum:e})},formatPrice:function(t){return(t=(t=String(t).replace(",",".").replace(/[^0-9.]/g,"")).split("."))[0]=chunkSplit(t[0]),t[1]&&(t[1]=t[1].length<2?t[1]+="0":t[1].substr(0,2)),2<t.length&&(t=t.splice(0,2)),t.join(".")},loadFromStorage:function(){if(!flexbe_cli.is_admin&&localStorage)try{var t=JSON.parse(localStorage.getItem("f_cart"));t&&t instanceof Array&&(this.list=t)}catch(t){}},saveToStorage:function(){if(!flexbe_cli.is_admin&&localStorage)if(this.list&&this.list instanceof Array)try{localStorage.setItem("f_cart",JSON.stringify(this.list))}catch(t){}else this.list=[]}})}();
!function(){var n,a,d={hidden:"hidden-all-m",navCreated:"mobile-navigation--created",cartContainer:"nav-header-controls--cart",burgerContainer:"nav-header-controls--burger"},u={block:".b_block",element:".element-item",nav:".mobile-navigation",header:".header-wrapper",cartBtn:".widget-list .cart-button",navbar:".nav-header",navbarContent:".nav-header-content",navbarControls:".nav-header-controls",navmenu:".nav-menu",navmenuItem:".nav-menu-item"},h=function(e,t){void 0===t&&(t=!1);var n=$(e);if(!n.is(u.element)){var a=n.closest(u.element);n=a.length?a:n}n.toggleClass(d.hidden,!t)};flexbe_cli.widget.register("MENU01",{created:{},onLoad:function(){this.createWidget()},createWidget:function(){var n=this;this.clickEvent="click",this.navbarStyle=!1,this.navmenuCreated=!1;var e=$(u.block).slice(0,3).find(u.header).eq(0);if((e=e.filter(function(e,t){var n=$(t).offset();return n&&n.top<=800})).length){var t=e.attr("data-fixed-color")||"light",a=e.attr("data-fixed-contrast")||"dark";this.cssBackground=t,this.background=t,this.contrast=a,["light","dark"].includes(t)&&(this.cssBackground="light"===t?"#FFF":"#000")}this.$source=e,this.$nav=this.$area.find(u.nav),this.$navbar=this.$area.find(u.navbar),this.$navmenu=this.$area.find(u.navmenu),this.fillNavmenu(),this.fillNavbar(),this.navbarStyle&&((this.background||this.cssBackground)&&(["light","dark"].includes(this.background)?this.$nav.attr("data-color",this.background):this.cssBackground&&(this.$navbar.css("background-color",this.cssBackground),this.$navmenu.css("background-color",this.cssBackground))),this.contrast?this.$nav.attr("data-contrast",this.contrast):this.color&&this.$nav.css("color",this.color),setTimeout(function(){if(n.$nav.addClass(d.navCreated+" header-style-"+n.navbarStyle),"panel"===n.navbarStyle){var e=n.$navbar.outerHeight();(n.$source.find(".elements-list").outerHeight()||0)<40&&n.$source.closest(".header-area, .b_block").addClass(d.hidden),flexbe_cli.block.$list.eq(0).css("paddingTop",e+"px")}},30)),this.navmenuCreated&&flexbe_cli.events.off("mobilemenu_command").on("mobilemenu_command",function(e,t){if(t)switch(t.command){case"toggle":n.toggleMenu();break;case"open":n.openMenu();break;case"close":n.closeMenu()}})},fillNavbar:function(){var a=this,r=a.created,e=a.$navbar,i=a.$source,t=a.navmenuCreated,s=e.find(u.navbarContent),o=e.find(u.navbarControls);s.empty(),o.empty();var c=[],l=[];return function(){var e=$(u.cartBtn).eq(0);if(e.length){r.cart=!0,l.push("cart"),a.$cart=$('<li class="'+d.cartContainer+'"></li>'),a.$cart.append(e.clone()),h(e,!1),o.append(a.$cart),a.background||(a.color=e.css("color"),a.cssBackground=e.css("background-color"),a.background=this.cssBackground);var t=e.closest(".w_widget"),n=t[0]&&t[0]._core;a.$cart.on(a.clickEvent,function(){a.toggleMenu(!1),flexbe_cli.events.emit("cart_command",{command:"toggle"})}),flexbe_cli.events.on("cart_event.mobilemenu",function(e,t){t&&"updateCount"===t.event&&n&&o.toggleClass("cart-empty",!n.count)}),n&&o.toggleClass("cart-empty",!n.count)}else r.cart=!1;r.cart}(),function(){t?(a.$burger=$('<li class="'+d.burgerContainer+'"><i></i><i></i><i></i></li>'),o.append(a.$burger),l.push("burger"),a.$burger.on(a.clickEvent,function(){a.toggleMenu()}),r.burger=!0):r.burger=!1;r.burger}(),l.length&&function(){var e=i.find(".component-logo").eq(0);if(e.length){var t=Math.max(.35,e.innerHeight()/e.innerWidth()),n=40/t,a=e.clone();r.logo=!0,a.css({fontSize:"",maxWidth:n+"px"}),s.append(a),c.push("logo"),h(e,!1)}else r.logo=!1;r.logo}(),c.length&&l.length||1<l.length?this.navbarStyle="panel":0===c.length&&1===l.length?this.navbarStyle="round":this.navbarStyle=!1,{contentCreated:c,controlsCreated:l,style:this.navbarStyle}},fillNavmenu:function(){var s=this.created,o=this.$source;return this.$navmenu.find(u.navmenuItem).each(function(e,t){var n=$(t),a=n.attr("data-element"),r=o.find('[data-e-id="'+a+'"]'),i=r.length;i&&(n.append(r.clone()),n.find('[data-direction="row"]').attr("data-direction","column"),n.find(".element-content").removeClass("justify-content-center justify-content-end").addClass("justify-content-start"),r.addClass(d.hidden),s[a]=s[a]?s[a]+i:i)}),this.navmenuCreated=Object.keys(s).length,this.navmenuCreated},toggleMenu:function(e){this[(e=void 0===e?!(e=[!0,"true"].includes(this.$nav.attr("data-opened"))):!!e)?"openMenu":"closeMenu"]()},openMenu:function(){var e=this;this.$area.addClass("show");var t=this.$nav.outerHeight();this.$area.css("minHeight",t+"px"),this.$nav.attr("data-opened",!0),this.$navmenu.addClass("active"),this.$burger&&this.$burger.addClass("active"),$("body").addClass("overflow"),flexbe_cli.block.pushOverlay("mobilemenu"),flexbe_cli.run.is_screen_all_mobile&&(clearTimeout(n),a=flexbe_cli.scroll.latest,n=setTimeout(function(){$("body").addClass("is-widget-open is-mobilemenu-open").css("background",e.cssBackground),$("body, html").scrollTop(0)},1e3))},closeMenu:function(){flexbe_cli.run.is_screen_all_mobile&&(clearTimeout(n),$("body").removeClass("is-widget-open is-mobilemenu-open").css("background",""),$("body, html").scrollTop(a)),this.$area.removeClass("show"),this.$area.css("minHeight",""),this.$nav.attr("data-opened",!1),this.$navmenu.removeClass("active"),this.$burger&&this.$burger.removeClass("active"),$("body").removeClass("overflow"),flexbe_cli.block.removeOverlay("mobilemenu")}})}();